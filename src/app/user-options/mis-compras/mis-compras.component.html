<section>
    <app-user-sidebar></app-user-sidebar>
    <div class="container-miscompras">
        <div class="frame">
            <div class="title">
                <h2>Mis Compras</h2>
            </div>
         
            <div class="container">


                <div class="row mb-3" [formGroup]="myGroup">
                    <div class="col-12 col-md-1">
                      <small id="emailHelp" class="form-text text-muted">&nbsp;ID.</small>
                      <input class="form-control form-control-sm"  placeholder="Id" formControlName="idFilter">
                    </div>
                    <div class="col-12 col-md-2">
                      <small id="emailHelp" class="form-text text-muted">&nbsp;Dirección</small>
                      <input class="form-control form-control-sm" placeholder="5ta Avenida" formControlName="direccionFilter">
                    </div>
                    <div class="col-12 col-md-2">
                      <small id="emailHelp" class="form-text text-muted">&nbsp;Fecha de compra</small>
                      <input type="date" class="form-control form-control-sm" formControlName="fechaFilter" disabled>
                    </div>
                    <div class="col-12 col-md-3">
                      <div class="row">
                        <div class="col-9">
                          <small id="emailHelp" class="form-text text-muted">&nbsp;Estados de la compra</small>
                          <select class="form-control form-control-sm" formControlName="stateFilter">
                            <option value="">Todos</option>
                            <option *ngFor="let estado of estadosOperacion" [value] = "estado">
                              {{estado | convertEstadoOp}}
                            </option>
                          </select>
                        </div>
                        <div class="col-1 mt-4">
                          <button type="button" class="btn btn-primary btn-sm reset"><i class="fas fa-sync"></i></button>
                        </div>
                      </div>
                      
                      
                    </div>
                  </div>


                <div class="table-responsive">
                    <table mat-table matTableResponsive [dataSource]="data" matSort  class="mat-elevation-z8" multiTemplateDataRows>

                        <!--- Note that these columns can be defined in any order.
                              The actual rendered columns are set as a property on the row definition" -->
                      
                        <!-- Position Column -->
                        <ng-container  matColumnDef="nroOperacion">
                          <th  mat-header-cell *matHeaderCellDef class="headerTable" mat-sort-header> ID </th>
                          <td mat-cell *matCellDef="let element"> {{element.nroOperacion}} </td>
                        </ng-container>
                      
        
                        <ng-container matColumnDef="direccion.calle">
                            <th mat-header-cell *matHeaderCellDef class="headerTable"> Direccion de envio </th>
                            <td mat-cell *matCellDef="let element"> {{element.direccionEnvio.calle}} {{element.direccionEnvio.numeroCalle}}, Córdoba </td>
                          </ng-container>
                      
                        <!-- Weight Column -->
                        <ng-container matColumnDef="fechaOperacion">
                          <th mat-header-cell *matHeaderCellDef class="headerTable" mat-sort-header> Fecha de compra</th>
                          <td mat-cell *matCellDef="let element"> {{element.fechaOperacion | convertFecha | slice:0:8}} </td>
                        </ng-container>
        
        
                        <ng-container matColumnDef="fechaEnvio">
                            <th mat-header-cell *matHeaderCellDef class="headerTable" mat-sort-header> Fecha de envío</th>
                            <td mat-cell *matCellDef="let element">Sin datos</td> <!-- {{element.fechaEnviada}} -->
                        </ng-container>
        
                        <ng-container matColumnDef="fechaEntrega">
                            <th mat-header-cell *matHeaderCellDef class="headerTable" mat-sort-header> Fecha de entrega </th>
                            <td mat-cell *matCellDef="let element">Sin datos</td> <!-- {{element.fechaRecibida}} -->
                        </ng-container>
                      
                        <!-- Symbol Column -->
                        <ng-container matColumnDef="estado">
                          <th mat-header-cell *matHeaderCellDef class="headerTable" mat-sort-header> Estado </th>
                          <td mat-cell *matCellDef="let element"> {{element.estado | convertEstadoOp}} </td>
                        </ng-container>
        
                        <ng-container matColumnDef="medioPago.nombre">
                            <th mat-header-cell *matHeaderCellDef class="headerTable" mat-sort-header> Medio de pago </th>
                            <td mat-cell *matCellDef="let element"> {{element.medioPago.nombre | lowercase | titlecase }} </td>
                        </ng-container>
        
                        <ng-container matColumnDef="total">
                            <th mat-header-cell *matHeaderCellDef class="headerTable" mat-sort-header> Total </th>
                            <td mat-cell *matCellDef="let element"> {{element.total | currency:"EUR":"symbol"}} </td>
                        </ng-container>
        
                        <ng-container matColumnDef="expandedDetail">
                            <td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplay.length">
                              <div class="example-element-detail" [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
                                
                                <div class="container-fluid jumbotron pt-3 pb-3">
        
                                  <app-detalle-compra-desktop [operacion]="element"></app-detalle-compra-desktop>                                
                                    
                                </div>
                                                            
                              </div>
                            </td>
                            
                        </ng-container>
                        
                        <tr mat-header-row *matHeaderRowDef="columnsToDisplay; sticky: true"></tr>
                        <tr mat-row *matRowDef="let element; columns: columnsToDisplay;"
                            class="example-element-row rowCursor"
                            [class.example-expanded-row]="expandedElement === element"
                            (click)="expandedElement = expandedElement === element ? null : element">
                        </tr>
                        <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
                        <!--  -->
        
                      </table>
                </div>
                <mat-paginator style="background-color: transparent;" [pageSizeOptions]="[10, 25, 100]"></mat-paginator>
                
            </div>
            <br>
            

        </div>
        <br>
    </div>


</section>